-- ON DELETE SET NULL = When a FK is deleted, replace FK with NULL
-- ON DELETE CASCADE  = When a FK is deleted, delete row.
==============================================================
-- Create the customers table
CREATE TABLE customers (
   customer_id INT PRIMARY KEY,
   customer_name VARCHAR(50)
);

-- Create the orders table with a foreign key constraint
CREATE TABLE orders (
   order_id INT PRIMARY KEY,
   order_date DATE,
   customer_id INT,
   FOREIGN KEY (customer_id) REFERENCES customers(customer_id) ON DELETE CASCADE
);

-- Insert some sample data into the customers table
INSERT INTO customers (customer_id, customer_name)
VALUES  (1, 'John Doe'),
        (2, 'Jane Smith');

-- Insert some sample data into the orders table
INSERT INTO orders (order_id, order_date, customer_id)
VALUES  (101, '2024-01-01', 1),
        (102, '2024-01-02', 2),
        (103, '2024-01-03', 1);

-- Delete a customer (and associated orders will be deleted due to CASCADE)
DELETE FROM customers WHERE customer_id = 1;

-- Verify that the associated orders have been deleted
SELECT * FROM orders;
